<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Animated Grid Demo</title>
  <style>
    @font-face {
      font-family: "Geist Sans";
      src: url("https://assets.codepen.io/605876/GeistVF.ttf") format("truetype");
    }

    *,
    *::before,
    *::after {
      box-sizing: border-box;
    }

    :root {
      --speed: 10s;
      --transition: 0.15s;
    }

    body {
      display: grid;
      place-items: center;
      min-height: 100vh;
      background-color: hsl(0 0% 100%);
      font-family: "Geist Sans", sans-serif;
      color: hsl(0 0% 10%);
      font-weight: 80;
      transition: background-color 0.25s, color 0.25s;
      background-image:
        radial-gradient(at 27% 37%, hsla(215, 98%, 61%, 0.15) 0px, transparent 0%),
        radial-gradient(at 97% 21%, hsla(125, 98%, 72%, 0.15) 0px, transparent 50%),
        radial-gradient(at 52% 99%, hsla(354, 98%, 61%, 0.15) 0px, transparent 50%),
        radial-gradient(at 10% 29%, hsla(256, 96%, 67%, 0.15) 0px, transparent 50%),
        radial-gradient(at 97% 96%, hsla(38, 60%, 74%, 0.15) 0px, transparent 50%),
        radial-gradient(at 33% 50%, hsla(222, 67%, 73%, 0.15) 0px, transparent 50%),
        radial-gradient(at 79% 53%, hsla(343, 68%, 79%, 0.15) 0px, transparent 50%);
    }

    .controls {
      display: grid;
      grid-template-columns: 1fr auto;
      gap: 0.5rem;
      padding: 1rem;
      border: 1px solid hsl(0 0% 90%);
      border-radius: 6px;
      background: hsl(0 0% 100%);
      position: fixed;
      top: 1rem;
      right: 1rem;
      z-index: 2;
    }

    label, input {
      accent-color: #db2777;
      cursor: pointer;
    }

    .window {
      height: 250px;
      container-type: inline-size;
      transform-style: preserve-3d;
      width: 100%;
      max-width: 600px;
      outline: 4px dashed transparent;
      transition: outline 0.5s;
    }

    .scene {
      --buff: 3rem;
      height: 100%;
      width: 100%;
      mask:
        linear-gradient(transparent, white var(--buff) calc(100% - var(--buff)), transparent),
        linear-gradient(90deg, transparent, white var(--buff) calc(100% - var(--buff)), transparent);
      mask-composite: intersect;
    }

    ul.grid {
      --count: 6;
      --inset: 0;
      --outset: 2.5;
      height: 100%;
      width: 100%;
      margin: 0;
      list-style: none;
      padding: 0 1rem;
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1rem;
      transform-style: preserve-3d;
    }

    li {
      min-height: 60px;
      transform-style: preserve-3d;
      width: 100%;
      z-index: calc(1 + var(--active));
      position: relative;
    }

    li::before {
      content: "";
      position: absolute;
      inset: 4px 4px -2px -2px;
      border-radius: 6px;
      background: hsl(0 0% 0% / 0.1);
      filter: blur(calc(var(--active, 0) * 8px));
      z-index: -1;
      transition: scale var(--transition), opacity var(--transition), translate var(--transition), filter var(--transition);
      transform-origin: 50% 0;
      scale: 1 calc(1 + (var(--active, 0) * 0.05));
    }

    .item {
      align-items: center;
      background: hsl(0 0% 100%);
      border: 1px solid hsl(0 0% 90%);
      color: hsl(0 0% 10%);
      border-radius: 6px;
      cursor: pointer;
      display: flex;
      gap: 1rem;
      height: 100%;
      justify-content: start;
      overflow: hidden;
      padding: 1.25rem;
      text-align: center;
      width: 100%;
      transition: transform var(--transition), scale var(--transition), background-color 0.25s, color 0.25s;
      scale: calc(1 + (var(--active, 0) * 0.05));
      transform: translate3d(0, 0, calc(var(--active, 0) * 24px));
    }

    .item__icon {
      width: 24px;
      color: rgb(124, 58, 237);
    }

    .item__text {
      flex: 1;
      text-align: center;
    }

    @media (prefers-reduced-motion: no-preference) {
      li {
        --duration: calc(var(--speed) * 1);
        --delay: calc((var(--duration) / var(--count)) * (var(--index, 0) - 8));
        animation: slide var(--duration) var(--delay) infinite linear;
        translate: 0% calc(((var(--count) - var(--index)) + var(--inset, 0)) * 100%);
      }
      li:hover {
        --active: 1;
      }
      @keyframes slide {
        100% {
          translate: 0% calc((var(--index) + var(--outset, 0)) * -100%);
        }
      }
    }

    /* Indexing for animation timing */
    li:nth-of-type(1) { --index: 0; }
    li:nth-of-type(2) { --index: 0; }
    li:nth-of-type(3) { --index: 1; }
    li:nth-of-type(4) { --index: 1; }
    li:nth-of-type(5) { --index: 2; }
    li:nth-of-type(6) { --index: 2; }
    li:nth-of-type(7) { --index: 3; }
    li:nth-of-type(8) { --index: 3; }
    li:nth-of-type(9) { --index: 4; }
    li:nth-of-type(10) { --index: 4; }
    li:nth-of-type(11) { --index: 5; }
    li:nth-of-type(12) { --index: 5; }
  </style>
</head>
<body>
  <main class="window">
    <div class="scene">
      <ul class="grid">
        <!-- Example items -->
        <li><div class="item"><div class="item__icon">ðŸ”¥</div><div class="item__text">Item 1</div></div></li>
        <li><div class="item"><div class="item__icon">âš¡</div><div class="item__text">Item 2</div></div></li>
        <li><div class="item"><div class="item__icon">ðŸš€</div><div class="item__text">Item 3</div></div></li>
        <li><div class="item"><div class="item__icon">ðŸŽ¯</div><div class="item__text">Item 4</div></div></li>
        <li><div class="item"><div class="item__icon">ðŸŒŸ</div><div class="item__text">Item 5</div></div></li>
        <li><div class="item"><div class="item__icon">ðŸ’¡</div><div class="item__text">Item 6</div></div></li>
        <li><div class="item"><div class="item__icon">ðŸ“¦</div><div class="item__text">Item 7</div></div></li>
        <li><div class="item"><div class="item__icon">ðŸ§ </div><div class="item__text">Item 8</div></div></li>
        <li><div class="item"><div class="item__icon">ðŸŽµ</div><div class="item__text">Item 9</div></div></li>
        <li><div class="item"><div class="item__icon">ðŸ’»</div><div class="item__text">Item 10</div></div></li>
        <li><div class="item"><div class="item__icon">ðŸ§©</div><div class="item__text">Item 11</div></div></li>
        <li><div class="item"><div class="item__icon">ðŸ“±</div><div class="item__text">Item 12</div></div></li>
      </ul>
    </div>
  </main>

  <div class="controls">
    <label for="speed">Speed</label>
    <input type="range" min="1" max="30" step="1" value="10" id="speed" />
  </div>

  <script>
    const ranger = document.querySelector('#speed');
    const speedUpdate = () => {
      document.documentElement.style.setProperty('--speed', `${ranger.value}s`);
    };
    ranger.addEventListener('input', speedUpdate);
  </script>
</body>
</html>
