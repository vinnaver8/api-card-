<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Grok Think – Three Animations Demo</title>
  <style>
    /* ===========================
       GLOBAL & CONTAINER STYLES
       =========================== */
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      background-color: #000;
      color: #fff;
      font-family: 'Inter', sans-serif; /* Using Inter font */
      height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 16px; /* Add padding for mobile view */
    }

    /* The fixed-size box (500×360) in the center */
    #box {
      position: relative;
      width: 100%; /* Make width fluid for responsiveness */
      max-width: 500px; /* Max width for desktop */
      height: 360px;
      background-color: #111;
      border: 1px solid #333;
      border-radius: 12px;
      overflow: hidden; /* Ensures content stays within the box */
    }

    /* ===========================
       1) TYPING ANIMATION
       =========================== */
    #typing {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 1.2rem;
      white-space: nowrap;
      overflow: hidden;
      border-right: 2px solid #fff;
      width: max-content; /* Allow width to be determined by content */
      max-width: 0; /* Animate this to reveal text */
      animation:
        typing-reveal 3s steps(29, end) forwards, /* steps(29, end) for "What is the meaning of life?" (29 chars) */
        blink 0.6s step-end infinite alternate;
      padding-right: 2px; /* Ensure space for caret */
    }

    /* Keyframes for revealing text character by character */
    @keyframes typing-reveal {
      from { max-width: 0; }
      to   { max-width: 100%; } /* Animate max-width to reveal the text */
    }
    @keyframes blink {
      50% { border-color: transparent; }
    }

    /* ===========================
       2) THINKING + SCROLLING
       =========================== */
    #thinking {
      display: none;
      width: 100%;
      height: 100%;
      position: relative;
      padding: 16px;
    }

    /* Spinner at top-left */
    #spinner {
      position: absolute;
      top: 16px;
      left: 16px;
      width: 18px;
      height: 18px;
      border: 3px solid #333;
      border-top: 3px solid #fff;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }
    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* Counting text to the right of spinner */
    #countText {
      position: absolute;
      top: 14px;
      left: 46px;
      font-size: 1rem;
      white-space: nowrap;
    }

    /* Centered vertical‐scroll container */
    #scrollContainer {
      position: absolute;
      top: 60px;
      left: 50%;
      transform: translateX(-50%);
      width: 90%;
      height: 200px;
      overflow: hidden;
    }

    #scrollContent {
      position: absolute;
      top: 0;
      width: 100%;
      line-height: 1.4rem;
      color: #ccc;
      font-size: 0.95rem;
      /* Slower scroll: 10 seconds per full cycle to match thinking time */
      animation: scrollUp 10s linear infinite;
    }

    @keyframes scrollUp {
      0%   { transform: translateY(0); }
      100% { transform: translateY(-50%); }
    }

    /* ===========================
       3) FINAL THOUGHT BOX
       =========================== */
    #final {
      display: none;
      width: 100%; /* Make width fluid for responsiveness */
      max-width: 500px; /* Max width for desktop */
      height: 360px;
      background-color: #111;
      border-radius: 12px;
      border: 1px solid #333;
      padding: 16px;
      box-sizing: border-box;
    }

    /* Green check‐mark icon */
    #checkIcon {
      width: 24px;
      height: 24px;
      fill: #4caf50;
      vertical-align: middle;
      margin-right: 8px;
    }
    #finalHeader {
      display: flex;
      align-items: center;
      font-size: 1.2rem;
      margin-bottom: 12px;
    }

    /* Final text scroll if needed */
    #finalContent {
      font-size: 0.95rem;
      line-height: 1.4rem;
      color: #ddd;
      height: 280px;
      overflow-y: auto;
    }

    /* ===========================
       4) OFFICES DISPLAY
       =========================== */
    #offices-display {
      display: none; /* Initially hidden */
      width: 100%;
      height: 100%;
      padding: 20px;
      background-color: #000;
      color: #fff;
      overflow-y: auto; /* Allow scrolling if content overflows */
    }

    #offices-display h2 {
      font-size: 1.8rem;
      margin-bottom: 20px;
      line-height: 1.2;
    }

    #offices-display p {
      font-size: 0.9rem;
      line-height: 1.5;
      margin-bottom: 20px;
    }

    #offices-display button {
      border: 1px solid #fff;
      background-color: transparent;
      color: #fff;
      padding: 8px 15px;
      border-radius: 5px;
      font-size: 0.9rem;
      cursor: pointer;
      transition: background-color 0.3s, color 0.3s;
    }

    #offices-display button:hover {
      background-color: #fff;
      color: #000;
    }

    #offices-map-container {
      flex: 1;
      min-width: 200px;
      margin-left: 20px; /* Added margin for spacing */
      display: flex;
      justify-content: center;
      align-items: center;
    }

    #offices-map-container svg {
      width: 100%;
      height: auto;
      max-width: 300px; /* Max width for the SVG map */
    }

    #offices-map-container text {
      font-family: 'Inter', sans-serif;
      font-size: 7px; /* Smaller font for coordinates */
    }

    #offices-map-container .city-name {
        font-size: 8px; /* Slightly larger for city names */
        fill: #fff;
    }

    /* Responsive adjustments for offices display */
    @media (max-width: 600px) {
      #offices-display {
        padding: 10px;
      }
      #offices-display h2 {
        font-size: 1.5rem;
      }
      #offices-map-container {
        margin-top: 20px; /* Add top margin when stacked */
        margin-left: 0; /* Remove left margin when stacked */
      }
      #offices-display .flex-container {
        flex-direction: column; /* Stack content vertically */
      }
    }
  </style>
</head>
<body>
  <!-- The single, fixed-size box -->
  <div id="box" class="rounded-lg shadow-lg">
    <!-- 1) Typing -->
    <div id="typing" class="rounded-lg">What is the meaning of life?</div>

    <!-- 2) Thinking + spinner + scroll -->
    <div id="thinking" class="rounded-lg">
      <div id="spinner"></div>
      <div id="countText">Thinking for 1 second...</div>

      <div id="scrollContainer">
        <div id="scrollContent">
          <p>First, I need to acknowledge the depth of the question. It's not something that can be answered lightly or with a simple phrase. The meaning of life encompasses philosophy, purpose, and individual experience.</p>
          <p>Second, perspectives vary: some find meaning through relationships, others through achievements, and still others through self-discovery or spiritual beliefs.</p>
          <p>Finally, each person's answer may evolve over time as they grow, learn, and encounter new experiences.</p>
          <!-- Duplicate for seamless looping -->
          <p>First, I need to acknowledge the depth of the question. It's not something that can be answered lightly or with a simple phrase. The meaning of life encompasses philosophy, purpose, and individual experience.</p>
          <p>Second, perspectives vary: some find meaning through relationships, others through achievements, and still others through self-discovery or spiritual beliefs.</p>
          <p>Finally, each person's answer may evolve over time as they grow, learn and encounter new experiences.</p>
        </div>
      </div>
    </div>

    <!-- 3) Final Thought Box -->
    <div id="final" class="rounded-lg shadow-lg">
      <div id="finalHeader">
        <!-- Inline SVG for green check mark -->
        <svg id="checkIcon" viewBox="0 0 24 24">
          <path d="M9 16.2l-3.5-3.5-1.4 1.4 4.9 4.9 10-10-1.4-1.4z"/>
        </svg>
        Thought for 5 seconds
      </div>
      <div id="finalContent">
        <!-- Original content of finalContent is now stored in JS for typing effect -->
        <p>The question "What is the meaning of life?" is one that has puzzled humanity for centuries, and it's not something that comes with a single, universal answer. Instead, it's a deeply personal and complex idea that can look very different depending on who's asking and what they value.</p>
        <h4 style="margin-top:12px; margin-bottom:8px;">A Range of Perspectives</h4>
        <p>People have approached this question from many angles:</p>
        <ul style="margin-left: 16px; color: #ddd;">
          <li><strong>Philosophical Views:</strong> Some philosophers, like existentialists, suggest that life doesn't come with a built-in meaning. Instead, individuals must create their own purpose.</li>
          <li><strong>Religious/Spiritual Interpretations:</strong> Many religious traditions propose that the meaning of life is to fulfill the will of a higher power, achieve spiritual enlightenment, or attain harmony with the universe.</li>
          <li><strong>Scientific Approaches:</strong> From a scientific perspective, life may be seen as a process of evolution, where meaning arises from survival, reproduction, and the expansion of knowledge.</li>
          <li><strong>Personal Fulfillment:</strong> Others believe the meaning of life is found in personal happiness, relationships, creativity, and leaving a positive impact on the world.</li>
        </ul>
      </div>
    </div>

    <!-- 4) Offices Display -->
    <div id="offices-display">
      <div style="font-size: 0.8rem; color: #aaa; margin-bottom: 20px;">[ OFFICES ]</div>
      <h2>Collaboration across borders</h2>

      <div class="flex-container" style="display: flex; justify-content: space-between; align-items: flex-start; flex-wrap: wrap;">
        <div style="flex: 1; min-width: 280px;">
          <p>
            We are hiring across all our offices in San Francisco, Palo Alto, and London, UK. We prioritize in-person
            work to support our fast-paced, collaborative projects. Exceptional candidates are welcome to
            apply from anywhere.
          </p>
          <button>
            OPEN ROLES
          </button>
        </div>
        <div id="offices-map-container">
          <svg viewBox="0 0 500 250">
            <!-- World outline - simplified for illustrative purposes -->
            <path d="M 0 125 C 125 0, 375 0, 500 125" stroke="#444" stroke-width="1" fill="none"/>
            <path d="M 0 125 C 125 250, 375 250, 500 125" stroke="#444" stroke-width="1" fill="none"/>

            <!-- Cities and lines -->
            <!-- San Francisco -->
            <circle cx="100" cy="100" r="3" fill="#FF5733"/>
            <text x="105" y="95" class="city-name">SAN FRANCISCO</text>
            <text x="105" y="105" fill="#aaa">PALO ALTO</text>
            <text x="105" y="115" fill="#aaa">37.6145°N</text>
            <text x="105" y="125" fill="#aaa">122.3945°W</text>

            <!-- London -->
            <circle cx="400" cy="80" r="3" fill="#FF5733"/>
            <text x="405" y="75" class="city-name">LONDON</text>
            <text x="405" y="85" fill="#aaa">51.5053°N</text>
            <text x="405" y="95" fill="#aaa">0.121°W</text>

            <!-- Memphis -->
            <circle cx="250" cy="180" r="3" fill="#FF5733"/>
            <text x="255" y="175" class="city-name">MEMPHIS</text>
            <text x="255" y="185" fill="#aaa">35.1495°N</text>
            <text x="255" y="195" fill="#aaa">90.049°W</text>

            <!-- Connecting lines from image -->
            <path d="M100,100 C175,50 325,50 400,80" stroke="#FF5733" stroke-width="1" fill="none"/>
            <path d="M100,100 C150,140 200,160 250,180" stroke="#FF5733" stroke-width="1" fill="none"/>
            <path d="M400,80 C350,120 300,140 250,180" stroke="#FF5733" stroke-width="1" fill="none"/>

          </svg>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Global variables for DOM elements
    let typingDiv, thinkingDiv, finalDiv, countText, finalContent, officesDisplayDiv;
    // Store parsed elements for the "one by one" typing effect in the final section
    let originalFinalContentElements = [];

    /**
     * Initiates the entire animation sequence:
     * 1. Typing animation.
     * 2. Thinking animation with spinner and counter.
     * 3. Final thought box with "one by one" text reveal.
     * 4. Offices display.
     * 5. Automatic restart after completion.
     */
    function startAnimationSequence() {
      // Hide all sections to start fresh
      typingDiv.style.display = "none";
      thinkingDiv.style.display = "none";
      finalDiv.style.display = "none";
      officesDisplayDiv.style.display = "none";

      // Reset typing animation
      typingDiv.style.maxWidth = "0";
      typingDiv.textContent = "What is the meaning of life?";

      // Reset thinking animation elements
      countText.textContent = `Thinking for 1 second...`;
      const scrollContent = document.getElementById("scrollContent");
      scrollContent.style.animationDuration = "10s";

      // Reset final content for typing effect
      finalContent.innerHTML = '';

      // Stage 1: Typing animation (3 seconds)
      typingDiv.style.display = "block";
      setTimeout(() => {
        typingDiv.style.display = "none"; // Hide typing div
        thinkingDiv.style.display = "block"; // Show thinking div

        let seconds = 1;
        countText.textContent = `Thinking for ${seconds} second...`;

        // Stage 2: Thinking animation (counts up to 10 seconds)
        const intervalId = setInterval(() => {
          seconds++;
          const plural = seconds > 1 ? "seconds" : "second";
          countText.textContent = `Thinking for ${seconds} ${plural}...`;

          if (seconds >= 10) { // Increased thinking time to 10 seconds
            clearInterval(intervalId); // Stop the counter
            // After 10 seconds, pause for 1 second, then show the final thought box
            setTimeout(() => {
              thinkingDiv.style.display = "none"; // Hide thinking div
              finalDiv.style.display = "block"; // Show final div
              // Stage 3: Start typing out the final content "one by one"
              typeOutFinalContent(0);
            }, 1000); // 1 second pause
          }
        }, 1000); // Update counter every 1 second
      }, 3000); // Initial typing animation duration
    }

    /**
     * Recursively types out content for the final thought section.
     * Paragraphs are typed character by character, while headers and lists are appended instantly.
     * @param {number} elementIndex The index of the current element to process from `originalFinalContentElements`.
     */
    function typeOutFinalContent(elementIndex) {
      if (elementIndex < originalFinalContentElements.length) {
        const currentElementHTML = originalFinalContentElements[elementIndex];
        const tempContainer = document.createElement('div');
        tempContainer.innerHTML = currentElementHTML;
        const actualElement = tempContainer.firstElementChild; // Get the actual element (<p>, <h4>, <ul>)

        if (!actualElement) { // Safety check for malformed HTML
          console.error("Could not parse element:", currentElementHTML);
          setTimeout(() => typeOutFinalContent(elementIndex + 1), 100);
          return;
        }

        // Append the actual element to the final content container
        finalContent.appendChild(actualElement);

        if (actualElement.tagName === 'P') {
          // If it's a paragraph, type its text content character by character
          const originalText = actualElement.textContent;
          actualElement.textContent = ''; // Clear for typing effect
          let charIndex = 0;
          const typingSpeed = 20; // milliseconds per character

          function typeChar() {
            if (charIndex < originalText.length) {
              actualElement.textContent += originalText[charIndex];
              charIndex++;
              setTimeout(typeChar, typingSpeed);
            } else {
              // Finished typing this paragraph, move to the next element after a short pause
              setTimeout(() => typeOutFinalContent(elementIndex + 1), 500);
            }
          }
          typeChar(); // Start typing characters
        } else if (actualElement.tagName === 'H4' || actualElement.tagName === 'UL') {
          // For H4 and UL, just append them fully.
          // Their content (including nested LIs for UL) will appear instantly with the block.
          setTimeout(() => typeOutFinalContent(elementIndex + 1), 500); // Small pause before next block
        } else {
          // For any other unexpected element type, just append and move on.
          setTimeout(() => typeOutFinalContent(elementIndex + 1), 500);
        }
      } else {
        // All elements typed out. Stage 4: Show offices display
        setTimeout(() => {
          finalDiv.style.display = "none";
          officesDisplayDiv.style.display = "block";
          // Stage 5: Restart the entire animation sequence after a delay
          setTimeout(startAnimationSequence, 5000); // Show offices for 5 seconds then restart
        }, 1000); // Wait 1 second after final text finishes before showing offices
      }
    }

    // Initialize elements and start the animation when the DOM is fully loaded
    document.addEventListener("DOMContentLoaded", () => {
      typingDiv = document.getElementById("typing");
      thinkingDiv = document.getElementById("thinking");
      finalDiv = document.getElementById("final");
      countText = document.getElementById("countText");
      finalContent = document.getElementById("finalContent");
      officesDisplayDiv = document.getElementById("offices-display");

      // Store the original HTML content of finalContent and parse its children
      // This allows us to re-construct and type them out later
      const tempDiv = document.createElement('div');
      // Set initial content to be empty, as it will be populated by JS
      tempDiv.innerHTML = `
        <p>The question "What is the meaning of life?" is one that has puzzled humanity for centuries, and it's not something that comes with a single, universal answer. Instead, it's a deeply personal and complex idea that can look very different depending on who's asking and what they value.</p>
        <h4 style="margin-top:12px; margin-bottom:8px;">A Range of Perspectives</h4>
        <p>People have approached this question from many angles:</p>
        <ul style="margin-left: 16px; color: #ddd;">
          <li><strong>Philosophical Views:</strong> Some philosophers, like existentialists, suggest that life doesn't come with a built-in meaning. Instead, individuals must create their own purpose.</li>
          <li><strong>Religious/Spiritual Interpretations:</strong> Many religious traditions propose that the meaning of life is to fulfill the will of a higher power, achieve spiritual enlightenment, or attain harmony with the universe.</li>
          <li><strong>Scientific Approaches:</strong> From a scientific perspective, life may be seen as a process of evolution, where meaning arises from survival, reproduction, and the expansion of knowledge.</li>
          <li><strong>Personal Fulfillment:</strong> Others believe the meaning of life is found in personal happiness, relationships, creativity, and leaving a positive impact on the world.</li>
        </ul>
      `;
      originalFinalContentElements = Array.from(tempDiv.children).map(child => child.outerHTML);

      // Start the animation for the very first time
      startAnimationSequence();
    });
  </script>
</body>
</html>

